# Product Documentation

---

---

# üëã¬†**Welcome to Perena**

### **Where Money Grows - The New Standard for Holding Stablecoins**

Perena powers USD*, a new kind of on-chain dollar that is more secured, composable and rewarding.

USD* is a rewarding stable token backed by a diversified basket of trusted blue chip stablecoins backed by cash equivalents and treasury bills ‚Äî currently including USDC, USDT, and PYUSD ‚Äî and it auto-compounds fees through Perena‚Äôs AMM infrastructure. Whether you're a DeFi user, trader, or builder, USD* gives you the benefits of stablecoin exposure without the downsides of idle capital, fragmented liquidity, or manual management.

By holding USD*, you're not just holding dollars ‚Äî you're holding a unified, composable layer of stablecoin liquidity that grows with the ecosystem.

### **About Perena**

Perena is building the core infrastructure for a more unified and efficient internet economy.

Perena‚Äôs **Num√©raire is** a capital-efficient stableswap AMM designed to unlock deep, composable liquidity across stable assets. Num√©raire supports a modular pool structure ‚Äî including the Seed Pool and Growth Pools ‚Äî which enables USD* to serve as the central bridge asset for stablecoin interoperability and yield.

Built on Solana for speed and scale, and backed by a team with experience from the Solana Foundation, CUBE exchange, Blackrock and Gauntlet, Perena is reimagining how stablecoins can move, earn, and integrate across DeFi.

<aside>
üîó

### Quick Links:

üåê¬†[Official site](http://www.perena.org)
üè¶¬†[Numeraire Dapp](http://app.perena.org)

üê¶¬†[X account](http://x.com/perena__) 
üí¨¬†[Join our Discord](https://t.co/WsfJDCKCHZ) 

üé®¬†[Brand Kit](https://www.figma.com/design/jG9RZSGrgxNNJMZp9S7goB/Brand-Guide_EXT?node-id=1-2&t=9BAq7YWfDjU9cNDW-1)

</aside>

---

# üìñ¬†**Understanding USD***

**Perena's capital-efficient stablecoin LP token**

![Frame 1321317795.jpg](attachment:c8ba9ffa-e820-4f34-8d0f-55196563f5bc:Frame_1321317795.jpg)

## **What is USD***

USD* is the liquidity provider (LP) token representing a share of Perena‚Äôs Seed Pool ‚Äî a deep, auto-compounding pool made up of trusted stablecoins: **USDC, USDT, and PYUSD**. When users deposit any of these tokens (or a proportional combination) into the Seed Pool, they receive USD* in return.

But USD* abstracts away the complexity of stablecoin diversity while concentrating liquidity and yield into a single, composable asset.

USD* unlocks seamless access to deeper liquidity, yield strategies, and cross-stablecoin interoperability ‚Äî all while being natively composable on Solana.

---

# üôé‚Äç‚ôÇÔ∏è¬†**For users - Quickstart Guide**

**Get started with Perena in just a few steps**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/55f6ebac-b085-44e8-9158-b352948871cf/315ec5bb-8398-45f9-aa58-9ca5e84948cc/image.png)

<aside>
üíµ

USD* is your gateway to smarter stablecoin exposure. Start by minting it through Perena‚Äôs Seed Pool, then swap, hold, or use it however you like.

</aside>

---

### **Step 1: Provide Liquidity to Mint USD***

The easiest way to get USD* is by depositing stablecoins into Perena‚Äôs Seed Pool. This mints USD*, a reward-accruing asset backed by USDC, USDT, and PYUSD.

- Go to the [**Seed Pool**](https://app.perena.org/pools/USDC-USDT-PYUSD)
- Choose **single asset** (USDC, USDT, or PYUSD) or a **balanced multi-asset** deposit
- Confirm the transaction ‚Äî you‚Äôll receive USD* in your wallet

*Why this matters:* USD* earns fees from the Seed Pool and serves as your base asset across the Perena ecosystem.

[Seed Pool UI](https://perena.gitbook.io/~gitbook/image?url=https%3A%2F%2F3313196802-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FEqS0QJrdKWhEoL3fGdSM%252Fuploads%252FrJU6OnwO4MscKnXUfO32%252Fimage.png%3Falt%3Dmedia%26token%3Dfe3a5bf1-84f3-4402-bf81-9fe7a73bf158&width=768&dpr=4&quality=100&sign=84fc369c&sv=2)

Seed Pool UI

---

### **Optional: Grow Your Yield with Growth Pools**

To earn more, deposit your USD* or USDC into **Growth Pools**, paired with supported partner stablecoins.

- [Choose a Growth Pool](https://app.perena.org/)
- Select deposit type:
    - **Single asset (USD*)** ‚Äì simple and quick
    - **Balanced** ‚Äì reduces fees and maximizes LP output
- You‚Äôll earn from:
    - **Swap fees** in the Growth Pool
    - **Underlying reward** from USD* itself
    
    [Perena Pools](https://perena.gitbook.io/~gitbook/image?url=https%3A%2F%2F3313196802-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FEqS0QJrdKWhEoL3fGdSM%252Fuploads%252F6wcifr2A3nIHHVZDgf5f%252Fimage.png%3Falt%3Dmedia%26token%3D29ec4795-5cfb-4da0-965c-097660da8b6c&width=768&dpr=4&quality=100&sign=4d9b8148&sv=2)
    
    Perena Pools
    

---

### **Step 2: Swap Between Stablecoins**

Use Perena‚Äôs Swap UI to trade between USD*, its backing assets (USDC, USDT, PYUSD), or other partner stablecoins.

- Pick your input/output tokens
- Set slippage tolerance
- Confirm swap

Perena routes trades through USD* when needed, giving you **better rates and deeper liquidity** ‚Äî even across smaller, long-tail stablecoins.

We‚Äôre working on integrating aggregators such as Jupiter and Titan. You will be able to swap all tokens on our UI soon!

[Swap UI](https://perena.gitbook.io/~gitbook/image?url=https%3A%2F%2F3313196802-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FEqS0QJrdKWhEoL3fGdSM%252Fuploads%252F3g2jy4UvzMe2b8BDp9Qv%252Fimage.png%3Falt%3Dmedia%26token%3D005bee60-16d5-4021-b4a6-a3bf2dc67afc&width=768&dpr=4&quality=100&sign=82380465&sv=2)

Swap UI

---

### Pro Tips

- **Hold USD***: It auto-compounds rewards as long as you hold it
- **Bridge or integrate**: Use USD* across DeFi (like Exponent and RateX)
- **Track performance**: Watch your USD* balance grow over time from pooled fees

---

# üë∑‚Äç‚ôÇÔ∏è¬†**For Builders - Integrate Perena**

![Integrate.jpg](attachment:6775c387-5a64-4ea5-aa8d-af5f592d2d21:Integrate.jpg)

## **Key Properties**

| Feature | Description |
| --- | --- |
| **Symbol** | USD* |
| **Token Standard** | SPL |
| **Decimals** | 6 |
| **Token Contract** | [`BenJy1n3WTx9mTjEvy63e8Q1j4RqUc6E4VBMz3ir4Wo6`](https://explorer.solana.com/address/BenJy1n3WTx9mTjEvy63e8Q1j4RqUc6E4VBMz3ir4Wo6) |
| **Underlying Assets** | USDC, USDT, PYUSD |
| **Minting Mechanism** | Seed Pool deposit |
| **Redemption** | Withdraw from Seed Pool |
| **Growth Utility** | LP asset for Growth Pools |

### **How to Mint USD***

USD* is minted by depositing into the **Seed Pool**:

- **Single asset deposit:** USDC, USDT, or PYUSD ‚Üí USD*
- **Multi-asset deposit:** Proportional USDC/USDT/PYUSD ‚Üí optimized USD* output

This allows builders and users to create a consistent stablecoin experience without manually managing underlying tokens.

---

### **How to Use USD***

Once minted, USD* can be:

- **Swapped:** via Perena‚Äôs Swap UI for supported stablecoins
- **Staked:** in **Growth Pools** to earn additional rewards from partner stablecoins
- **Bridged / Integrated:** into dApps, protocols, or products that require a composable, yield-generating stablecoin

---

### **Why USD***

- ‚úÖ **Unified Liquidity Layer:** No more fragmented stablecoin pairs
- üöÄ **Composability:** USD* powers two-hop swaps across Growth Pools
- üí∏ **Yield-Bearing:** Seed Pool fees are auto-compounded into USD*
- üîê **Risk-Isolated:** Exposure limited to trusted base assets in the Seed Pool

---

### **Integrating USD***

To integrate USD* into your protocol or product:

1. **Use Token Address:**
    
    [View on Solana Explorer](https://explorer.solana.com/address/BenJy1n3WTx9mTjEvy63e8Q1j4RqUc6E4VBMz3ir4Wo6)
    
2. **Set Token Decimals to 6**
3. **Reference Price Feeds** 
    - USD* / USDC
    - USD* / USDT
4. **Enable Wallet Support:**
    - Phantom, Solflare, Backpack

IDL : https://explorer.solana.com/address/NUMERUNsFCP3kuNmWZuXtm1AaQCPj9uw6Guv2Ekoi5P/anchor-program

SDK : https://www.npmjs.com/package/@perena/numeraire-sdk?activeTab=readme

The SDK provides you with off-chain helpers to call the Num√©raire program. The USD* price calculation logic can also be found in the SDK‚Äôs README

---

## **Adoption & Partners**

USD* is already integrated with:

‚úÖ¬†[**Jupiter**](https://www.notion.so/1d6a37a29ca480dbb9b2c97eb49fc469?pvs=21)

‚úÖ¬†[**Exponent**](https://www.exponent.finance/)

‚úÖ¬†[**Rate-X**](https://rate-x.io/)

‚úÖ¬†[**Sphere**](https://www.notion.so/1d6a37a29ca480dbb9b2c97eb49fc469?pvs=21)

More integrations launching soon...

More information on price oracle will be public soon. In the meantime, please reach out to the team on Discord for specific requests. 

---

# üå∏¬†**Perena‚Äôs Points : The Petals Program**

**Earn rewards across the Perena ecosystem. Hold longer, trade smarter, refer well ‚Äî and watch your Petals bloom.**

![Petals.jpg](attachment:98ab864d-5eac-49ee-a2c3-422c38c17423:Petals.jpg)

As we welcome a new season of product growth, we're excited to launch the **Petals Pre-Season Boost Campaign** ‚Äî rewarding early adopters and active users ahead of Season 1.

Petals are Perena‚Äôs native points system, designed to reward stablecoin users, LPs, and partners who help grow the ecosystem. The more you use Perena, the more you earn ‚Äî and the more you'll benefit in future airdrops, exclusive access, and other community incentives.

---

### **What‚Äôs New in Pre-Season**

- **Retroactive Rewards**: All swaps, LP activity, and referrals since launch are eligible for Petals.
- **Reduced Emissions**: Petals are now harder to earn ‚Äî every Petal counts more.
- **Multipliers**: The longer you LP, the more you earn (up to 3x).
- **Leaderboards & On-Chain Tracking**

---

## **How to Earn Petals**

### **1. Provide Liquidity**

Earn base Petals by depositing into the **Seed Pool** or any **Growth Pool**.

The longer you stay staked, the more you earn:

| Duration Staked | Petal Multiplier |
| --- | --- |
| 0‚Äì14 days | 1x |
| 15‚Äì29 days | 2x |
| 30‚Äì44 days | 2.5x |
| 45‚Äì59 days | 2.75x |
| 60+ days | 3x |

Bonus pools will be randomly selected throughout the campaign ‚Äî check in often!

---

### **2. Swap Stablecoins**

- Swap amount matters ‚Äî higher volume = more Petals
- Circular swaps or wash trades will be penalized
- Petals update live with a slight delay

---

### **3. Refer Friends**

Invite others to Perena. Referrals are **activity-based** ‚Äî you earn Petals **only when your referees swap or provide liquidity**.

| Referral Scenario | Rewards? |
| --- | --- |
| Your friend signs up but does not use the product | ‚ùå No Petals |
| Your friend swaps or LPs | ‚úÖ Both of you earn Petals |

---

### **4. Integrate USD***

Projects integrating USD* or enabling new use cases will earn bonus Petals for their users.

Current integrations:

- [**Exponent**](https://www.exponent.finance/) ‚Äì earn extra Petals by using the USD* market
- [**RateX**](https://rate-x.io/) ‚Äì Earn implied yield and more petals from USD* yield market

More integrations coming soon.

---

### **Tracking Your Petals**

- Points are tracked on-chain and updated regularly
- A public leaderboard
- Petals will become redeemable in future product phases

Join our Discord and follow [@Perena__](https://twitter.com/Perena__) on Twitter for real-time updates.

---

> üóìÔ∏è Reminder: The Pre-Season is live. All your current activity ‚Äî from LPing to swapping ‚Äî already counts.
> 

---

# üåä¬†**Perena‚Äôs AMM - Num√©raire**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/55f6ebac-b085-44e8-9158-b352948871cf/108b67a4-754b-42f2-99b0-9a2ea43a4328/image.png)

<aside>
üü£

**Contract:** [`NUMERUNsFCP3kuNmWZuXtm1AaQCPj9uw6Guv2Ekoi5P`](https://explorer.solana.com/address/NUMERUNsFCP3kuNmWZuXtm1AaQCPj9uw6Guv2Ekoi5P/anchor-program)

</aside>

## **Overview**

Num√©raire is Perena's stableswap AMM. It facilitates the launch, trading and liquidity provisioning of stablecoins by implementing composable, extensible pools and reducing idle-liquidity that exists in traditional AMM designs.

We have a flexible architecture to anticipate and adapt to emerging stablecoin standards. Num√©raire is the first stableswap to natively integrate Solana Interest Bearing Tokens ([IBTs](https://solayer.org/resources/blogs/intro-to-interest-bearing-token-extension)), empowering innovation and growth for the Solana stablecoin ecosystem.

## **Architecture**

**Hub-and-Spoke Model**

This composable structure isolates risks and optimizes swaps by connecting established stablecoins with emerging ones. It consists in the combination of a **Seed Pool** that extends its liquidity to multiple **Growth Pools**.

**Seed Pool**

The Seed Pool serves as the core liquidity hub, consisting of trusted and widely DeFi-integrated stablecoins such as USDC, USDT, and PYUSD. **USD Star** (symbol **USD***) is the LP token representing ownership of the Seed Pool, continually appreciating in value as the Seed Pool accrues swap fees and auto-compounds its yield.

**Growth Pools**

Growth Pools extend the protocol's functionality, composed by USD*, the "hub asset", and individual partner stablecoins, the "spoke assets". Swaps route through USD* in two hops: first into USD*, then out of it. This mechanism protects the Seed Pool from risks of stablecoins outside it and maximizes the entire TVL utilization of Num√©raire - minters of USD* capture both the Seed Pool yield and then can deposit into Growth Pools for additional yield.

[Hub-and-spoke model, with USD* at the center and partner stablecoins around it.](https://perena.gitbook.io/~gitbook/image?url=https%3A%2F%2F3313196802-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FEqS0QJrdKWhEoL3fGdSM%252Fuploads%252FPdBjidvJSjO64Knkd9ND%252Fimage.png%3Falt%3Dmedia%26token%3De056a525-f159-4d70-8a18-af8b58d5a9ce&width=768&dpr=4&quality=100&sign=279d9356&sv=2)

Hub-and-spoke model, with USD* at the center and partner stablecoins around it.

## **Features**

**Bounded Liquidity**

Bounded liquidity minimizes asset idleness, which results in better exchange rates and boosted swap revenue. It's particularly important for stablecoin pools since most trading occurs very close to the peg.

Essentially, this implementation concentrates  liquidity in a narrow range ‚Äî at on-peg pricing (0.99-1.01) ‚Äî rather than spreading it across a wider price spectrum. When prices reach the bounds of the liquidity range, the pool only supports trading in one direction until prices return to the bounded range.

**Weighted Asset Exposure**

Perena's pools implement configurable asset weights to maintain optimal stability and trading efficiency across the protocol. This market-driven approach creates a self-reinforcing mechanism that maintains stability without external management by automatically adjusting swap prices based on token proportions.

Technically, the invariant equation establishes an anchor point that distributes liquidity according to target weights. When token proportions deviate from these targets, the equation automatically creates arbitrage opportunities by offering premium swap rates that drive liquidity back toward equilibrium.

The Seed Pool targets 45% USDC, 35% USDT, and 20% PYUSD. If USDC falls below its 45% target, the invariant equation produces more favorable rates for trades adding USDC, incentivizing arbitrageurs to restore balance.

Growth Pools extend this weighting mechanism with a simplified 50/50 weight between USD* (the Seed Pool LP token) and their partner stablecoins. This balanced weighting ensures efficient exchange between emerging stablecoins and the established stablecoins in the Seed Pool, while the hub-and-spoke model isolating risks.

Through this market-driven approach, the protocol maintains optimal capital efficiency and stability across both pool types without requiring active management.

## **User Benefits**

Capital efficiency usually comes with additional complexities and risks on traditional Solana AMMs, causing fragmented liquidity and increased conversion costs among a wider range of stablecoins. By unifying liquidity with superior capital efficiency, Num√©raire address these inefficiencies in DeFi providing unique advantages for all participants.

**Liquidity Providers**

Earn higher returns with passive liquidity provision

1. Pools have improved fee generation through more in-the-money liquidity (i.e, liquidity is concentrated around the peg within a narrow, 0.99-1.01, price range)
2. Yields from swap fees are auto-compounded without manual rebalancing of positions
3. Growth Pools have 1.5x yield opportunity by combining native swap fees with USD* yield from the Seed Pool
4. Liquidity Providers receive 100% of swap fees in all Pools, with a protocol fee planned for future implementation

**Stablecoin Issuers**

Num√©raire was designed with composability of issuers in mind, eliminating common bootstrapping challenges through a single, faster integration point.

1. Skip building liquidity independently, no more two-sided liquidity with USDC
2. Integrate with USD Star and access tightly, concentrated liquidity across its underlyings (USDC/USDT/PYUSD)
3. Reduce upfront capital and complexity with single-sided liquidity provision and minimal overhead

**Traders**

Better Rates, Simpler Trading

1. Pay less when swapping your favorite stablecoins
2. Trade emerging stablecoins through a single unified interface

---

# üîß¬†**Technical Design**

![Tech.jpg](attachment:e1227ed5-7b2e-49ff-b68b-8e3b34b4579d:Tech.jpg)

## High Level

Perena is a stableswap AMM which pools a number of stablecoins together into a single multi-asset pool. This pool has properties of both a [weighted pool](https://docs.balancer.fi/concepts/pools/weighted.html) and a [StableSwap pool](https://berkeley-defi.github.io/assets/material/StableSwap.pdf).

The multi-asset pool is the composition of multiple two asset pools, one per stablecoin, where each two asset pool has liquidity in the respective stablecoin, and liquidity in another asset *. * can be thought of as value, or as a *num√©raire*, and codifies the concept of a single US dollar worth of value.

Initially each two asset pool is seeded with an equal amount of its stablecoin and of *, representative of the assumption that every stable trades 1:1 with *. Therefore initially all stables trade 1:1 with each other, through *. We only require that each pool has the same amount of * and its stable, but different pools can have different amount of stables. Hence the proportion of the multi-asset pool that is made up of each stable gives an equilibrium weight $w_i$ for each stablecoin, where $\sum_i w_i = 1$. 

Consider our Seed Pool, containing 45% USDC, 35% USDT, and 20% PYUSD. Swaps between any pair of stables which pair to * can be implemented as two-hop swaps, first into *, then out of it. Thus the star graph of LPs this setup creates can be thought of itself as a single multi-asset pool. By restricting swaps to only be two hops (never terminate at *), the exchange rate of * to each token is in a way an oracle to the free market value of these stablecoins, without * itself being a holdable asset.

## Properties of The AMM

1. **Open market arbitrage**
    - The exchange rate offered by our multi-asset pool (amount of token $y$ out over amount of token $x$ in) is$j$$\frac{a_x}{a_y} = \frac{a_x^*}{a_y^*}$, equaling the open market exchange rate, assuming rational arbitragers.
2. **Swaps preserve constant value of ***
    - The amount of * across the multi-asset pool is constant across swaps. * is only being moved across two asset pools, but never exiting the system.
3. **Achieves value weights only at equilibrium**
    - Let $\pi_x$ be the proportion of the multi-asset pool (ignoring *) that is made up of stablecoin $x$. The multi-asset pool has token proportions equal to the initial seeding weights ($\pi_x = w_x, \forall \text{ }x$), if and only if $\frac{a_x}{a_y} = 1, \forall\text{ }x, y$. Otherwise there is an arbitrage incentive where some stablecoin can be traded to get more than 1 of some other stablecoin.

<aside>
üí° Intuitively the multi-asset pool is most capital efficient when the liquidity is distributed according to the initial weighting (the initial weighting is an anchor point for our CFMM). When this is not the case, the pool offers swaps towards equilibrium a premium.

</aside>

## Low Level

### Two Asset Pool

**Bonding Curve Invariant**

Recall that good stableswap invariants balance a tradeoff between constant product $xy = k$ and constant sum $x+y=k$, trying to behave like the latter as much as possible while still charging a price impact as reserves deplete.

Our two asset pool bonding curve is based on the Wombat invariant (see [page 5](https://www.wombat.exchange/Wombat_Whitepaper_Public.pdf)). Specifically given token amounts $x$ and $y$, we start with the invariant

$$
x + y - \frac{A}{x} - \frac{A}{y} = D
$$

where $A$ is an amplitude parameter to control how much we behave like constant product vs. constant sum. Note that we do not adopt the coverage ratio formulation of Wombat.

To seek more capital efficiency out of our invariant, we seek to bound the prices at which liquidity is concentrated. Let $p_x$ be the price of token $x$ in our pool, in terms of token $y$ ($p_x = \lim_{a_x \to 0}\frac{a_x}{a_y}$), where $a_y$ is the amount of token $y$ we get out for swapping in an infinitesimal amount $a_x$ of token $x$). We want 

$$
p_x \in [\alpha, \beta]
$$

at all valid states under our invariant, where these price bounds are decided at pool creation time (ie. $\alpha=0.99, \beta=\frac1 {0.99})$.

To achieve this bounded StableSwap property, we borrow the [virtual reserves](https://3407769812-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-MU527HCtxlYaQoNazhF%2Fuploads%2FZ678yKJa324RIF0N7HWL%2F2-CLP%20Technical%20Specification.pdf?alt=media&token=9b5544a3-49a1-4e26-a374-da13fd4517eb) concept of Gyroscope Finance‚Äôs CLP. We modify the invariant to be 

$$
x + y - \frac A {x + a} - \frac A {y + b} = 2 - \frac{A}{1+a}-\frac{A}{1+b}
$$

where $a$ is a function of $A, k, \alpha$  and $b$ is a function of $A, k, \beta$. Unlike most CFMMs which satisfy output-boundedness ([page 11](https://arxiv.org/pdf/2103.12732)) (no matter how much you swap, there is some of each asset left), we have removed this property, so at the price points $\alpha$ and $\beta$ the pool will be at max extent, containing all token $x$ and no token $y$, or all token $y$ and no token $x$, respectively. In these states the pool only supports swapping in one direction.

As it stands the amplitude parameter $A$ is not dimensionless, meaning it cannot be used to define bonding curve shape independent of the state of the pool liquidity ($A$ is different to give a pool with $x_0 = y_0 = 1000$ the same bonding curve shape as $x_0 = y_0 = 1000000$). To remedy this, we settle on our final invariant

$$
\frac{x}{L} + \frac{y}{L} - \frac A {\frac x L + a} - \frac A {\frac y L + b} = 2 - \frac{A}{1+a} - \frac{A}{1+b}
$$

where $L$ is the pool liquidity constant, thereby making $A$ dimensionless. By setting the liquidity constant of the right hand side to $2 - \frac{A}{1-a} - \frac{A}{1-b}$, we get the intuitive meaning of $L$ that it is the total value of each token in the pool. This is because initially $x=y=L$, making the left hand side equal the right hand side. 

### Multi-Asset Pool

**Swaps**

Consider a multi-token pool with $i$ pairs in states $x_i, y_i, L_i$. Assume token $y$ in two asset pool is always *, and token $x$ is always the stablecoin, as is the case in our smart contract implementation. Let $T=\sum_i y_i$ be the total number of * tokens in the multi-asset pool, which can be thought of as the pool TVL. Across swaps, $T$ is constant. 

<aside>
üí° Note that if the amount out is more than the reserve of the output asset, the swap is invalid. The maximum extent the pool can reach is all of one asset, none of another, at which point in only supports swapping in one direction.

</aside>

**Multi-Asset Pool Invariant**

The pool was initially seeded in equilibrium state where  $\frac {x_i}{T}= \frac{y_i}T = \frac{L_i}T = w_i, \forall i$. Call this state $E$, where all tokens trade 1:1 and all reserves are proportionate to the asset weighting of the pool. It serves as a constant function anchor point. Let $S$ be the state of the multi-asset pool (a set of two-asset pools, each between a different stablecoin and *). Then in all valid multi-asset states:

$$
\exists s_{x_1}, s_{x_2}, \dots, s_{x_n} \text{ two asset swaps st. }  s_{x_1} \oplus s_{x_2} \oplus \dots \oplus s_{x_n}(S) = E
$$

So there is always a sequence of two asset swaps, one per pool (some of which may be empty swaps) bringing the pool to the equilibrium state. Specifically the state where all tokens trade 1:1:‚Ä¶:1 (each two asset pair has equal amounts of token and star, $x_i = y_i = L_i$), and the pool has token balances proportionate to the token weights. Thinking of the composition of the two asset invariants under our *-preserving swap rule as itself a CFMM, the multi-asset pool invariant is that $E$ is an anchor point to our current state $S$.

We know that this invariant trivially holds initially, as we start in state $E$. Furthermore any sequence of swaps is reversible (each swap has an inverse swap undoing its action) and therefore the invariant holds across swaps.

**Add Liquidity (Mint)**

For ease of use, we allow for users to deposit liquidity in unbalanced amounts. Adding liquidity will inevitably change $T$, but should preserve the invariant of there existing a new equilibrium anchor point state $E'$ which we can get to under two asset swaps and which has $\frac {a'_x}{T'}= \frac{*'_x}{T'} = w_x, \forall x$. Liquidity add should also not change market price. To maintain this, we require the user add proportionate to the current state of the market. To support one sided adds, the user may provide a sequence of swaps they have precomputed to get them to hold balances proportionate to the market rates.

<aside>
üí° An interesting and desirable property of the liquidity add is that it requires swapping the added asset into the others. Hence if the added asset is near the low end of its two-asset bonding curve (trading below peg), there may not be enough * in its pool to execute this swap (in which case the add fails), or the add may translate to a lesser addition *. Intuitively the pool by design disincentivizes (will give you less LP tokens) adding assets which are worth less.

</aside>

**Remove Liquidity (Redeem)**

Redeeming liquidity entails computing the fraction of the pool that the user owns, removing it from the pool, and optionally swapping it into a single token.

---

# ‚ùì¬†**FAQ**

![FAQ.jpg](attachment:eb2e416b-f6ae-4b8e-b20c-505454359e86:FAQ.jpg)

- What are petals?
    
    Petals are our version of points and they act as proof of participation in the protocol!
    
- How can I get petals?
    
    The simplest way to get petals is by simply swapping and holding USD*! If you're looking for diversity you can also deposit USD* or a variety of other stablecoins into our Growth Pools which act as LPs and earn petals there as well.
    
- What Defi can I use my USD* in?
    
    The two official partners of Perena are Rate-X and Exponent! If you deposit in either the "farm" or "liquidity" tab in either of those protocols you'll be earning petals!
    
- I have my USD* deposited in Rate-X and/or Exponent and I can't see petals.
    
    Rest assured all deposits and petals are being tracked on the back end. Currently they're not displayed on the Perena UI but they will be in the future.
    
- Can I refer users?
    
    Yes! In the top right if you click your wallet you will have an invite code that you can use to bring others users into the protocol! You'll receive X % of their petals when they use your code.
    
- What is the OG role on Discord and how can I get it?
    
    OG is a role distributed to those who complete quests given out by the Perena team. Jump into #role-select channel click the purple "Quests Notifications" button and you'll then be able to post in #quest-chat. New quests will appear in the #new-quests announcement page so keep your eyes peeled for tasks to earn OG!
    
- My petals aren't updating. How can I fix that?
    
    Please disconnect and reconnect the wallet!
    
- How does a stablecoin de-peg affect the system?
    
    A de-peg occurs when a stablecoin loses its parity to the reference asset.
    
    In Perena Pools, if a stablecoin depegs, LPs may incurs losses proportional to the pool‚Äôs exposure to that asset‚Å†. For instance, consider the Seed Pool, consisting of 45% USDC, 35% USDT, and 20% PYUSD. If PYUSD de-pegs to $0.50, the LP token value will drop to $0.90 (calculated as 1 - (0.2 √ó 0.5)).
    
- What are the sources of yield in different pools?
    
    All pools earn yield from swap fees. In the case of Growth Pools, they include the base yield from the Seed Pool (USD*) and additional yield from swap fees of each Growth Pool.
    
- Do I get different yields depending on which stablecoin I deposit?
    
    No. When you deposit any supported stablecoin into the Seed Pool, you receive USD* which earns the same yield regardless of your initial deposit asset. The only difference might be in the initial price impact when converting your stablecoin to the required pool ratios, reducing the amount of USD* minted.
    
- How is slippage handled?
    - Default slippage settings are shown in the UI
    - Users can customize slippage tolerance
    - Recommended settings are provided
    - Price impact is displayed before confirming transactions
- As a liquidity provider, do I need to manually claim the yield?
    
    No. All swap fees (i.e., yield) automatically accumulate in the pool's reserves, increasing its total value. As the pool collects fees, LP token values rise proportionally, giving liquidity providers auto-compounded yields without operational overhead.
    
- What happens when the stablecoins in the pools are deviated  from its target weight?
    
    Transactions that shift an asset‚Äôs current weightage further away from the target weightage incur higher price impact while transactions that shift it closer to the target weightage will receive a premium ‚Äî you can get more than 1 of another stablecoin.
    
- How do I get help if I need it?
    
    Our support team is ready to help in our Discord.
    

*This documentation is provided for informational purposes only and should not be considered financial advice. Users should conduct their own research and risk assessment before interacting with the protocol.*